사장님, **"가장 중요한 데이터(Golden Set)를 직접 넣고, 그것이 바로 보고서에 반영되는 구조"**를 만들기 위한 최종 작업지시서입니다.

이 문서는 개발자가 **"아, 관리자 페이지(프론트)를 만들어서 DB(백엔드)랑 연결하고, 최종적으로 RAG가 이걸 읽어가게 하라는 거구나"**라고 한 번에 이해할 수 있도록 작성되었습니다.

아래 내용을 복사해서 개발자에게 전달해 주세요.

[작업지시서] ADC 플랫폼 골든셋(Golden Set) 구축 및 분석 파이프라인 구현
문서 번호: SPEC-GOLD-01

작성 일자: 2026-01-18

우선순위: 최상 (Urgent) 목표: 관리자가 고품질 PDF(FDA 라벨, 특허, 내부 자료)를 직접 업로드하고, AI가 이를 즉시 학습하여 분석 보고서에 반영하는 End-to-End 시스템 구현.

1. 개요 (Overview)
현재 크롤링(자동 수집) 외에, 관리자가 선별한 핵심 자료(Golden Set)를 수동으로 주입할 수 있는 **Admin UI(접수 창구)**가 부재함. 이를 신속히 개발하여 데이터 파이프라인을 완성하고 RAG 분석 품질을 확보해야 함.

2. 상세 구현 범위 (Scope of Work)
✅ Part A. 프론트엔드 (Admin UI)
관리자가 직관적으로 파일을 업로드하고 관리할 수 있는 대시보드 개발.

접속 경로: /admin/upload (일반 사용자 접근 불가, 관리자 로그인 필수)

파일 업로드 컴포넌트:

Drag & Drop 지원.

다중 파일 업로드 지원 (한 번에 여러 개 PDF).

지원 포맷: .pdf, .xlsx, .csv

메타데이터 입력 필드 (필수):

각 파일별로 아래 태그를 달 수 있어야 함.

문서 유형 (Select Box: FDA Label, Patent, Internal Data, Investor Deck)

약물명 (Input: 예 - Enhertu, Trodelvy)

신뢰도 등급 (Radio: High(Golden Set), Medium, Low)

상태 표시 (Feedback):

업로드 진행률 (Progress Bar).

처리 완료 시 "✅ DB 적재 및 임베딩 완료" 메시지 표시.

✅ Part B. 백엔드 & DB (Processing Pipeline)
업로드된 파일을 분석 가능한 형태로 변환하여 저장소에 적재.

DB 스키마 확인 및 보완 (Supabase):

documents 테이블에 source_type 컬럼이 있는지 확인 (Manual vs Crawler 구분용).

is_golden_set (Boolean) 컬럼 추가 → RAG 검색 시 가중치 부여를 위함.

Vector Extension (pgvector) 활성화 여부 재확인.

처리 프로세스 (The Pipeline):

Step 1: API가 파일 수신.

Step 2: 텍스트 및 표(Table) 데이터 추출 (Parser).

Step 3: Gemini 2.0 Flash를 호출하여 데이터 요약 및 임베딩 생성.

Step 4: Supabase에 벡터 데이터(Embedding)와 메타데이터 저장.

✅ Part C. RAG 분석 연결 (Integration)
업로드한 골든셋이 실제 보고서 작성에 쓰이도록 로직 수정.

검색 로직 (Retriever) 강화:

사용자 질문 시, **is_golden_set = True인 데이터를 우선적으로 검색(Boost)**하도록 쿼리 수정.

FDA 라벨 등 신뢰도 높은 자료가 답변의 근거로 최우선 인용되어야 함.

보고서 생성 (Generator - GPT-4o):

최종 보고서 작성 시, 참고 문헌 섹션에 "관리자 업로드 자료(Golden Set)"가 출처로 명시되도록 프롬프트 조정.

3. 개발자 체크리스트 (Acceptance Criteria)
작업 완료 후 다음 시나리오가 통과되어야 정산/검수 가능.

[ ] UI 접속: /admin/upload 페이지가 정상적으로 열리는가?

[ ] 업로드 테스트: '엔허투 FDA 라벨(PDF)'을 업로드했을 때 에러 없이 성공 메시지가 뜨는가?

[ ] DB 확인: Supabase 대시보드에서 방금 올린 파일이 is_golden_set: true로 저장되어 있는가?

[ ] 분석 테스트: 챗봇에게 "엔허투의 부작용은?"이라고 물었을 때, 내가 올린 PDF 내용을 근거로 답변하는가?

4. 참고 사항 (Reference)
Admin 계정: 현재 개발 중인 슈퍼 어드민 계정 사용.

모델 설정: 임베딩(Embedding) 모델은 기존 설정(Gemini) 유지.

UI 라이브러리: 현재 프로젝트에서 사용 중인 Shadcn/UI 또는 Tailwind CSS 활용.